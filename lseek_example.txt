#include <iostream>
#include <queue>
#include <vector>

using namespace std;

struct Process {
    int pid;        // Process ID
    int burstTime;  // Remaining burst time
    int arrivalTime;
    int completionTime;
    int waitingTime;
    int turnaroundTime;
};

int main() {
    int n, timeQuantum;
    cout << "Enter number of processes: ";
    cin >> n;

    cout << "Enter time quantum: ";
    cin >> timeQuantum;

    vector<Process> processes(n);
    queue<int> readyQueue;

    for (int i = 0; i < n; ++i) {
        cout << "Enter arrival time and burst time for process " << i << ": ";
        processes[i].pid = i;
        cin >> processes[i].arrivalTime >> processes[i].burstTime;
    }

    vector<int> remainingBurst(n);
    for (int i = 0; i < n; ++i) {
        remainingBurst[i] = processes[i].burstTime;
    }

    int currentTime = 0;
    int completed = 0;
    vector<bool> inQueue(n, false);

    // Add processes that have arrived at time 0
    for (int i = 0; i < n; ++i) {
        if (processes[i].arrivalTime <= currentTime) {
            readyQueue.push(i);
            inQueue[i] = true;
        }
    }

    while (!readyQueue.empty()) {
        int idx = readyQueue.front();
        readyQueue.pop();

        int execTime = min(timeQuantum, remainingBurst[idx]);
        currentTime += execTime;
        remainingBurst[idx] -= execTime;

        // Add new arriving processes
        for (int i = 0; i < n; ++i) {
            if (!inQueue[i] && processes[i].arrivalTime <= currentTime) {
                readyQueue.push(i);
                inQueue[i] = true;
            }
        }

        if (remainingBurst[idx] > 0) {
            // Not finished, add back to queue
            readyQueue.push(idx);
        } else {
            // Process finished
            processes[idx].completionTime = currentTime;
            processes[idx].turnaroundTime = currentTime - processes[idx].arrivalTime;
            processes[idx].waitingTime = processes[idx].turnaroundTime - processes[idx].burstTime;
            completed++;
        }
    }

    // Output
    cout << "\nPID\tArrival\tBurst\tCompletion\tTurnaround\tWaiting\n";
    for (int i = 0; i < n; ++i) {
        cout << processes[i].pid << "\t" << processes[i].arrivalTime << "\t"
             << processes[i].burstTime << "\t" << processes[i].completionTime << "\t\t"
             << processes[i].turnaroundTime << "\t\t" << processes[i].waitingTime << "\n";
    }

    return 0;
}
